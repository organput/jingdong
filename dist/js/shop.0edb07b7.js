"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[883],{9174:function(t,c,e){e.d(c,{K:function(){return o}});var a=e(6278),n=e(953),s=e(641);const o=t=>{const c=(0,a.Pj)(),{cartList:e}=(0,n.QW)(c.state),o=(t,e,a,n)=>{c.commit("changeCartItemInfo",{id:t,itemId:e,productInfo:a,num:n})},r=(0,s.EW)((()=>{const c=e.value[t]?.productList;return c})),i=(0,s.EW)((()=>{const c=e.value[t]?.shopName;return c})),l=(0,s.EW)((()=>{const c=e.value[t]?.productList;let a=0,n=0;if(c)for(const t in c)a+=c[t].count,c[t].check&&(n+=c[t].count*c[t].price);return n=n.toFixed(2),{total:a,price:n}}));return{cartList:e,changeCartItemInfo:o,products:r,shopName:i,calculations:l}}},5787:function(t,c,e){e.d(c,{A:function(){return u}});var a=e(641),n=e(33);const s={class:"docker"},o=["innerHTML"],r={class:"docker__title"};function i(t,c,e,i,l,d){const _=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.dockerList,((t,c)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)({docker__item:!0,"docker__item--active":c===e.dockerIndex}),key:t.icon},[(0,a.bF)(_,{to:t.to},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{class:"iconfont",innerHTML:t.icon},null,8,o),(0,a.Lk)("div",r,(0,n.v_)(t.text),1)])),_:2},1032,["to"])],2)))),128))])}var l={name:"DockerPage",props:["dockerIndex"],setup(){const t=[{icon:"&#xe92d;",text:"首页",to:{name:"Home"}},{icon:"&#xe616;",text:"购物车",to:{name:"CartList"}},{icon:"&#xe604;",text:"订单",to:{name:"OrderList"}},{icon:"&#xe600;",text:"我的",to:{name:"Home"}}];return{dockerList:t}}},d=e(6262);const _=(0,d.A)(l,[["render",i],["__scopeId","data-v-76eeabec"]]);var u=_},7548:function(t,c,e){e.d(c,{A:function(){return p}});var a=e(641),n=e(33);const s={class:"shop"},o=["src"],r={class:"shop__content__title"},i={class:"shop__content__tags"},l={class:"shop__content__highlight"};function d(t,c,e,d,_,u){return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("img",{class:"shop__img",src:e.item.imgUrl},null,8,o),(0,a.Lk)("div",{class:(0,n.C4)(["shop__content",{shop__content:!0,"shop__content--bordered":!e.hiddenBorder}])},[(0,a.Lk)("div",r,(0,n.v_)(e.item.title),1),(0,a.Lk)("div",i,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.item.tags,((t,c)=>((0,a.uX)(),(0,a.CE)("span",{class:"shop__content__tag",key:c},(0,n.v_)(t),1)))),128))]),(0,a.Lk)("p",l,(0,n.v_)(e.item.highlight),1)],2)])}var _={name:"ShopView",props:["item","hiddenBorder"]},u=e(6262);const k=(0,u.A)(_,[["render",d],["__scopeId","data-v-0f043c76"]]);var p=k},9362:function(t,c,e){e.r(c),e.d(c,{default:function(){return X}});var a=e(641),n=e(33);const s=t=>((0,a.Qi)("data-v-42a3b114"),t=t(),(0,a.jt)(),t),o={class:"wrapper"},r=s((()=>(0,a.Lk)("div",{class:"title"},"我的订单",-1))),i={class:"orders"},l={class:"order__title"},d={class:"order__status"},_={class:"order__content"},u={class:"order__content__imgs"},k=["src"],p={class:"order__content__info"},m={class:"order__content__price"},C={class:"order__content__count"};function h(t,c,e,s,h,v){const L=(0,a.g2)("DockerPage");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",o,[r,(0,a.Lk)("div",i,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.orderlists,((t,c)=>((0,a.uX)(),(0,a.CE)("div",{class:"order",key:c},[(0,a.Lk)("div",l,[(0,a.eW)((0,n.v_)(t.shopName)+" ",1),(0,a.Lk)("span",d,(0,n.v_)(t.isCancel?"已取消":"已下单"),1)]),(0,a.Lk)("div",_,[(0,a.Lk)("div",u,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.productList,((t,c)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:c},[c<=4?((0,a.uX)(),(0,a.CE)("img",{key:0,class:"order__content__img",src:t.imgUrl},null,8,k)):(0,a.Q3)("",!0)],64)))),128))]),(0,a.Lk)("div",p,[(0,a.Lk)("div",m,"¥"+(0,n.v_)(s.calculateTotals(t.productList).price),1),(0,a.Lk)("div",C,"共"+(0,n.v_)(s.calculateTotals(t.productList).total)+"件",1)])])])))),128))])]),(0,a.bF)(L,{dockerIndex:2})],64)}var v=e(953),L=e(6278),g=e(5787);const f=()=>{const t=(0,L.Pj)(),{orderlists:c}=(0,v.QW)(t.state),e=t=>{let c=0,e=0;if(t)for(const a in t)c+=t[a].count,t[a].check&&(e+=t[a].count*t[a].price);return e=e.toFixed(2),{total:c,price:e}};return{calculateTotals:e,orderlists:c}};var I={name:"OrderList",components:{DockerPage:g.A},setup(){const{calculateTotals:t,orderlists:c}=f();return{orderlists:c,calculateTotals:t}}},b=e(6262);const E=(0,b.A)(I,[["render",h],["__scopeId","data-v-42a3b114"]]);var X=E},1185:function(t,c,e){e.r(c),e.d(c,{default:function(){return ft}});var a=e(641);const n=t=>((0,a.Qi)("data-v-32095b2c"),t=t(),(0,a.jt)(),t),s={class:"wrapper"},o={class:"search"},r=n((()=>(0,a.Lk)("div",{class:"search__content"},[(0,a.Lk)("span",{class:"search__content__icon iconfont"},""),(0,a.Lk)("input",{class:"search__content__input",placeholder:"请输入商品名称"})],-1))),i={class:"shop-view"};function l(t,c,e,n,l,d){const _=(0,a.g2)("ShopView"),u=(0,a.g2)("ContentPage"),k=(0,a.g2)("CartPage");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("div",o,[(0,a.Lk)("div",{class:"search__back iconfont",onClick:c[0]||(c[0]=(...t)=>n.handleBackClick&&n.handleBackClick(...t))},""),r]),(0,a.Lk)("div",i,[n.item.imgUrl?((0,a.uX)(),(0,a.Wv)(_,{key:0,item:n.item,hiddenBorder:!0},null,8,["item"])):(0,a.Q3)("",!0)]),(0,a.bF)(u,{shopName:n.item.title},null,8,["shopName"]),(0,a.bF)(k,{shopName:n.item.title},null,8,["shopName"])])}e(4114);var d=e(953),_=e(5220),u=e(1663),k=e(7548),p=e(33);const m=t=>((0,a.Qi)("data-v-2c3eac14"),t=t(),(0,a.jt)(),t),C={class:"content"},h={class:"category"},v=["onClick"],L={class:"product"},g=["src"],f={class:"product__item__detail"},I={class:"product__item__title"},b={class:"product__item__sales"},E={class:"product__item__price"},X=m((()=>(0,a.Lk)("span",{class:"product__item__yen"},"¥",-1))),w={class:"product__item__origin"},P={class:"product__number"},y=["onClick"],T=["onClick"];function F(t,c,e,n,s,o){return(0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.categories,(t=>((0,a.uX)(),(0,a.CE)("div",{class:(0,p.C4)({category__item:!0,"category__item--active":n.currentTab===t.tab}),key:t.id,onClick:()=>n.handleTabClick(t.tab)},(0,p.v_)(t.name),11,v)))),128))]),(0,a.Lk)("div",L,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.list,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"product__item",key:t.id},[(0,a.Lk)("img",{class:"product__item__img",src:t.imgUrl},null,8,g),(0,a.Lk)("div",f,[(0,a.Lk)("h4",I,(0,p.v_)(t.name),1),(0,a.Lk)("p",b,"月售"+(0,p.v_)(t.sales)+"件",1),(0,a.Lk)("p",E,[X,(0,a.eW)((0,p.v_)(t.price)+" ",1),(0,a.Lk)("span",w,"¥"+(0,p.v_)(t.oldPrice),1)])]),(0,a.Lk)("div",P,[(0,a.Lk)("span",{class:"product__number__minus iconfont",onClick:()=>{n.changeCartItem(n.id,t.id,t,-1,e.shopName)}},"",8,y),(0,a.eW)(" "+(0,p.v_)(n.getProductCartCount(n.id,t.id))+" ",1),(0,a.Lk)("span",{class:"product__number__plus iconfont",onClick:()=>{n.changeCartItem(n.id,t.id,t,1,e.shopName)}},"",8,T)])])))),128))])])}var K=e(6278),W=e(9174);const x=[{id:1,name:"全部商品",tab:"all"},{id:2,name:"秒杀",tab:"seckill"},{id:3,name:"新鲜水果",tab:"fruit"}],Q=()=>{const t=(0,d.KR)(x[0].tab),c=c=>{t.value=c};return{currentTab:t,handleTabClick:c}},N=(t,c)=>{const e=(0,d.Kh)({list:[]}),n=async()=>{const a=await(0,u.J)(`/api/shop/${c}`,{tab:t.value});0===a?.errorno&&a?.data?.length&&(e.list=a.data)};(0,a.nT)((()=>{n()}));const{list:s}=(0,d.QW)(e);return{list:s}},j=()=>{const t=(0,K.Pj)(),{cartList:c,changeCartItemInfo:e}=(0,W.K)(),a=(c,e)=>{t.commit("changeShopName",{id:c,shopName:e})},n=(t,c,n,s,o)=>{e(t,c,n,s),a(t,o)},s=(t,e)=>c.value?.[t]?.productList?.[e]?.count||0;return{changeCartItem:n,cartList:c,getProductCartCount:s}};var A={name:"ContentPage",props:["shopName"],setup(){const t=(0,_.lq)(),c=t.params.id,{currentTab:e,handleTabClick:a}=Q(),{list:n}=N(e,c),{changeCartItem:s,cartList:o,getProductCartCount:r}=j();return{getProductCartCount:r,changeCartItem:s,categories:x,currentTab:e,handleTabClick:a,list:n,cartList:o,id:c}}},H=e(6262);const B=(0,H.A)(A,[["render",F],["__scopeId","data-v-2c3eac14"]]);var M=B;const D=t=>((0,a.Qi)("data-v-5aedba3d"),t=t(),(0,a.jt)(),t),S={class:"cart"},U={key:0,class:"product"},q={class:"product__header"},V=["innerHTML"],$={class:"product__header__clear"},J={key:0,class:"product__null"},O={key:0,class:"product__item"},R=["innerHTML","onClick"],z=["src"],G={class:"product__item__detail"},Y={class:"product__item__title"},Z={class:"product__item__price"},tt=D((()=>(0,a.Lk)("span",{class:"product__item__yen"},"¥",-1))),ct={class:"product__item__origin"},et={class:"product__number"},at=["onClick"],nt=["onClick"],st={class:"check"},ot={class:"check__icon"},rt={class:"check__icon__tag"},it={class:"check__info"},lt={class:"check__info__price"},dt={class:"check__btn"};function _t(t,c,e,n,s,o){const r=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[n.showCart?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"mask",onClick:c[0]||(c[0]=(...t)=>n.showCartClick&&n.showCartClick(...t))})):(0,a.Q3)("",!0),(0,a.Lk)("div",S,[n.showCart?((0,a.uX)(),(0,a.CE)("div",U,[(0,a.Lk)("div",q,[(0,a.Lk)("div",{class:"product__header__all",onClick:c[1]||(c[1]=()=>n.setCartCheck(n.id,n.totalCheck))},[(0,a.Lk)("span",{class:"product__header__icon iconfont",innerHTML:n.totalCheck?"":""},null,8,V),(0,a.eW)(" 全选 ")]),(0,a.Lk)("div",$,[(0,a.Lk)("span",{onClick:c[2]||(c[2]=()=>n.cleanCartProducts(n.id))},"清空购物车")])]),0===n.calculations.total?((0,a.uX)(),(0,a.CE)("div",J,"还没有添加商品")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.products,(t=>((0,a.uX)(),(0,a.CE)(a.FK,{key:t.id},[t.count>0?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.Lk)("div",{class:"product__item__check iconfont",innerHTML:t.check?"":"",onClick:()=>n.checkehandleClick(n.id,t.id)},null,8,R),(0,a.Lk)("img",{class:"product__item__img",src:t.imgUrl},null,8,z),(0,a.Lk)("div",G,[(0,a.Lk)("h4",Y,(0,p.v_)(t.name),1),(0,a.Lk)("p",Z,[tt,(0,a.eW)((0,p.v_)(t.price)+" ",1),(0,a.Lk)("span",ct,"¥"+(0,p.v_)(t.oldPrice),1)])]),(0,a.Lk)("div",et,[(0,a.Lk)("span",{class:"product__number__minus iconfont",onClick:()=>{n.changeCartItemInfo(n.id,t.id,t,-1)}},"",8,at),(0,a.eW)(" "+(0,p.v_)(t.count||0)+" ",1),(0,a.Lk)("span",{class:"product__number__plus iconfont",onClick:()=>{n.changeCartItemInfo(n.id,t.id,t,1)}},"",8,nt)])])):(0,a.Q3)("",!0)],64)))),128))])):(0,a.Q3)("",!0),(0,a.Lk)("div",st,[(0,a.Lk)("div",ot,[(0,a.Lk)("img",{src:"http://www.dell-lee.com/imgs/vue3/basket.png",class:"check__icon__img",onClick:c[3]||(c[3]=(...t)=>n.showCartClick&&n.showCartClick(...t))}),(0,a.Lk)("div",rt,(0,p.v_)(n.calculations.total),1)]),(0,a.Lk)("div",it,[(0,a.eW)(" 总计: "),(0,a.Lk)("span",lt,"¥"+(0,p.v_)(n.calculations.price),1)]),(0,a.Lk)("div",dt,[(0,a.bF)(r,{to:{path:`/order/${n.id}`}},{default:(0,a.k6)((()=>[(0,a.eW)(" 去结算 ")])),_:1},8,["to"])])])])],64)}const ut=()=>{const t=(0,_.lq)(),c=(0,K.Pj)(),e=t.params.id,{cartList:n,changeCartItemInfo:s,products:o,calculations:r}=(0,W.K)(e),i=(t,e)=>{c.commit("checkehandleClick",{id:t,itemId:e})},l=t=>{c.commit("cleanCartProducts",{id:t})},d=(t,e)=>{c.commit("setCartCheck",{id:t,totalCheck:e})},u=(0,a.EW)((()=>{const t=n.value[e]?.productList;if(t){for(const c in t)if(!t[c].check)return!1;return!0}return!1}));return{products:o,totalCheck:u,setCartCheck:d,calculations:r,cleanCartProducts:l,id:e,changeCartItemInfo:s,checkehandleClick:i}},kt=()=>{const t=(0,d.KR)(!1),c=()=>{t.value=!t.value};return{showCart:t,showCartClick:c}};var pt={name:"CartPage",props:["shopName"],setup(){const{showCart:t,showCartClick:c}=kt(),{totalCheck:e,setCartCheck:a,calculations:n,cleanCartProducts:s,products:o,id:r,changeCartItemInfo:i,checkehandleClick:l}=ut();return{showCartClick:c,showCart:t,setCartCheck:a,totalCheck:e,cleanCartProducts:s,calculations:n,products:o,changeCartItemInfo:i,id:r,checkehandleClick:l}}};const mt=(0,H.A)(pt,[["render",_t],["__scopeId","data-v-5aedba3d"]]);var Ct=mt;const ht=()=>{const t=(0,_.lq)(),c=t.params.id,e=(0,d.Kh)({item:{}}),a=async()=>{const t=await(0,u.J)(`/api/shop/${c}`);t&&(e.item=t)},{item:n}=(0,d.QW)(e);return{item:n,getItemData:a}},vt=()=>{const t=(0,_.rd)(),c=()=>{t.push({name:"Home"})};return{handleBackClick:c}};var Lt={name:"ShopPage",components:{ShopView:k.A,ContentPage:M,CartPage:Ct},setup(){const{item:t,getItemData:c}=ht(),{handleBackClick:e}=vt();return c(),{item:t,handleBackClick:e}}};const gt=(0,H.A)(Lt,[["render",l],["__scopeId","data-v-32095b2c"]]);var ft=gt}}]);
//# sourceMappingURL=shop.0edb07b7.js.map